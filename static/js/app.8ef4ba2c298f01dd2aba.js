webpackJsonp([1,2],{100:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("hello")],1)},staticRenderFns:[]}},101:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("section",{staticClass:"hero is-fullheight"},[s("div",{staticClass:"hero-head"},[s("header",{staticClass:"nav"},[s("div",{staticClass:"container"},[s("div",{staticClass:"nav-left"},[s("gene-list",{attrs:{options:t.genes},on:{select:t.onOptionSelect}})],1),t._v(" "),t._m(0),t._v(" "),t._m(1)])])]),t._v(" "),s("div",{staticClass:"hero-body has-text-left"},[s("section",[s("div",{staticClass:"container is-fluid"},[s("div",{staticClass:"heading"},[s("h1",{staticClass:"title"},[t._v("Gene Name: "+t._s(t.geneName))]),t._v(" "),s("label",{staticClass:"label"},[t._v("NP#")]),t._v(" "),s("p",{staticClass:"control"},[s("span",{staticClass:"select"},[s("select",{on:{change:t.setNP}},[s("option",{attrs:{disabled:"",value:""}},[t._v("Please select one")]),t._v(" "),t._l(t.np,function(e){return s("option",[t._v(t._s(e))])})],2)])])]),t._v(" "),s("div",{staticStyle:{padding:"0% 10% 0% 10%"}},[s("hr"),t._v(" "),s("p",t._l(t.allSeq,function(e){return s("span",{class:[e.classification]},[t._v(t._s(e.text)),"modification"===e.classification?s("div",{staticClass:"tooltiptext",domProps:{innerHTML:t._s(e.tooltip)}}):t._e()])})),t._v(" "),s("hr"),t._v(" "),s("p",[s("span",[t._v("|")]),t._v(" "),t._l(t.sequences,function(e){return s("span",{staticClass:"tooltip"},[t._v(" "+t._s(e)+" |")])})],2),t._v(" "),s("hr")]),t._v(" "),s("pep-table",{attrs:{data:t.selected.variants,columns:t.headers,filterKey:t.searchQuery}})],1)])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"nav-toggle"},[s("span"),t._v(" "),s("span"),t._v(" "),s("span")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"nav-right nav-menu"},[s("a",{staticClass:"nav-item is-active"},[t._v("\n              Home\n            ")])])}]}},102:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",{staticClass:"table"},[s("thead",[s("tr",t._l(t.columns,function(e){return s("th",{class:{active:t.sortKey==e},on:{click:function(s){t.sortBy(e)}}},[t._v("\n        "+t._s(t._f("capitalize")(e))+"\n        "),s("span",{staticClass:"arrow",class:t.sortOrders[e]>0?"asc":"dsc"})])}))]),t._v(" "),s("tbody",t._l(t.filteredData,function(e){return s("tr",t._l(t.columns,function(n){return s("td",[t._v("\n        "+t._s(e[n])+"\n      ")])}))}))])},staticRenderFns:[]}},103:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"autocomplete-input"},[s("p",{staticClass:"control has-icon has-icon-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"input is-medium is-loading",attrs:{placeholder:"gene name search"},domProps:{value:t.keyword},on:{input:[function(e){e.target.composing||(t.keyword=e.target.value)},function(e){t.onInput(e.target.value)}],keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27))return null;t.isOpen=!1},blur:function(e){t.isOpen=!1},keydown:[function(e){if(!("button"in e)&&t._k(e.keyCode,"down",40))return null;t.moveDown(e)},function(e){if(!("button"in e)&&t._k(e.keyCode,"up",38))return null;t.moveUp(e)},function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.select(e)}]}}),t._v(" "),s("i",{staticClass:"fa fa-angle-down"})]),t._v(" "),s("ul",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"}],staticClass:"options-list"},t._l(t.fOptions,function(e,n){return s("li",{class:{highlighted:n===t.highlightedPosition},on:{mouseenter:function(e){t.highlightedPosition=n},mousedown:t.select}},[t._v("\n        "+t._s(e)+"\n    ")])}))])},staticRenderFns:[]}},106:function(t,e){},107:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(37),i=s(36),o=s.n(i);s(35),n.a.config.productionTip=!1,new n.a({el:"#app",template:"<App/>",components:{App:o.a}})},35:function(t,e){},36:function(t,e,s){s(75);var n=s(9)(s(39),s(100),null,null);t.exports=n.exports},39:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(97),i=s.n(n);e.default={name:"app",components:{Hello:i.a}}},40:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=s(20),i=s.n(n),o=s(26),a=s.n(o),r=s(98),l=s.n(r),c=s(99),p=s.n(c),u=s(46);e.default={name:"hello",data:function(){return{all:[{"":-1,SEQ:["asd"],NP_Counts:1,Gene_Name:"aaa001"}],selected:{"":-1,seq:"asd",nu:"",variants:[]},sequences:[],geneName:"AATK",genes:[],fasta_seq:"",np:[],headers:["REF","ALT","protein_ref","protein_pos","protein_alt"],searchQuery:""}},created:function(){var e=this,s=new XMLHttpRequest;s.open("get","./static/A_Gene_variants.json.gz.txt",!0),s.onreadystatechange=function(n){if(s.readyState===XMLHttpRequest.DONE){var i=t.from(s.responseText,"base64");u.unzip(i,function(t,s){if(t)console.log(t);else{var n=JSON.parse(s.toString());e.all=n,e.genes=a.a.keys(e.all),e.np=a.a.keys(e.all.AATK),e.selected=e.all.AATK[e.np[0]],e.selected.variants=a.a.map(e.selected.variants,function(t){return t.protein_pos=+t.protein_pos,t}),e.fasta_seq=e.selected.seq,e.sequences=e.selected.nu}})}},s.onprogress=function(t){t.loaded,t.total,console.log(t.loaded/t.total)},s.send()},components:{GeneList:l.a,PepTable:p.a},methods:{onOptionSelect:function(t){console.log("Selected option:",t),this.geneName=t,this.np=a.a.keys(this.all[t]),this.selected=this.all[this.geneName][this.np[0]],this.selected.variants=a.a.map(this.selected.variants,function(t){return t.protein_pos=+t.protein_pos,t}),this.fasta_seq=this.selected.seq,this.sequences=this.selected.nu},setNP:function(t){this.selected=this.all[this.geneName][t.target.value],this.selected.variants=a.a.map(this.selected.variants,function(t){return t.protein_pos=+t.protein_pos,t}),this.fasta_seq=this.selected.seq,this.sequences=this.selected.nu},resetSS:function(){this.fasta_seq=this.selected.FASTA_SEQ}},computed:{allSeq:function(){var t=this,e=a.a.chain(this.sequences).uniq().map(function(e){var s=t.fasta_seq.indexOf(e);return{w_end:0,t:"p",pos:s,end:s+e.length}}).value().sort(function(t,e){return e.pos-t.pos}),s=a.a.reduce(this.selected.variants,function(t,e,s){return t[e.protein_pos]||(t[e.protein_pos]={t:"v",pos:e.protein_pos,table:'<table class="table is-bordered is-striped is-narrow"><thead><tr><th>protein_ref</th><th>protein_pos</th><th>protein_alt</th></tr></thead>'}),t[e.protein_pos].table+="<tr><td>"+e.protein_ref+"</td><td>"+e.protein_pos+"</td><td>"+e.protein_alt+"</td></tr>",t},{});s=i()(s).sort(function(t,e){return t.pos-e.pos}),console.log("num v",s.length);var n=[],o=0;a.a.forEach(e,function(t,e){var i=t;for(i.col=o;;){if(0===s.length)break;var a=s.pop();if(a.pos<t.pos){s.push(a);break}a.pos>t.end&&n.push(a),i.pos<=a.pos&&a.pos<=i.end&&(n.push({col:o,w_end:0,t:"p",pos:a.pos,end:i.end}),i.end=a.pos,n.push(a))}n.push(i),o=(o+1)%3});var r=0;a.a.forEach(s.reverse(),function(t){return n.push(t)});var l=[],c=this.fasta_seq;return a.a.forEach(n,function(t){if("p"===t.t){var e=[t.pos,t.end];e[0]!==-1&&(l.push({classification:"normal",text:c.slice(e[1])}),0===t.w_end?l.push({classification:"peptide col"+t.col,text:c.slice(e[0],e[1])}):1===t.w_end?l.push({classification:"peptide",text:"["+c.slice(e[0],e[1])}):2===t.w_end&&l.push({classification:"peptide",text:c.slice(e[0],e[1])+"]"}),c=c.slice(0,e[0]))}else if("v"===t.t){var s=t.pos;r+=1,l.push({text:c.slice(s),classification:"normal"}),l.push({text:c.slice(s-1,s),tooltip:t.table+"</table>",classification:"modification"}),c=c.slice(0,s-1)}}),l.push({classification:"normal",text:c}),console.log("f v",r),l.reverse()},variants:function(){var t=a.a.reduce(this.selected.variants,function(t,e,s){return t[e.protein_pos]||(t[e.protein_pos]={protein_pos:e.protein_pos,table:'<table class="table is-bordered is-striped is-narrow"><thead><tr><th>protein_ref</th><th>protein_pos</th><th>protein_alt</th></tr></thead>'}),t[e.protein_pos].table+="<tr><td>"+e.protein_ref+"</td><td>"+e.protein_pos+"</td><td>"+e.protein_alt+"</td></tr>",t},{});t=i()(t).sort(function(t,e){return t.protein_pos-e.protein_pos});var e=[],s=this.fasta_seq;return a.a.forEachRight(t,function(t){var n=t.protein_pos;e.push({text:s.slice(n),classification:"normal"}),e.push({text:s.slice(n-1,n),tooltip:t.table+"</table>",classification:"modification"}),s=s.slice(0,n-1)}),e.push({classification:"normal",text:s}),e.reverse()}}}}).call(e,s(0).Buffer)},41:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(26),i=s.n(n);e.default={props:{options:{type:Array,required:!0}},data:function(){return{isOpen:!1,highlightedPosition:0,keyword:""}},methods:{onInput:function(t){this.isOpen=!!t,this.highlightedPosition=0},moveDown:function(){this.isOpen&&(this.highlightedPosition=(this.highlightedPosition+1)%this.fOptions.length)},moveUp:function(){this.isOpen&&(this.highlightedPosition=this.highlightedPosition-1<0?this.fOptions.length-1:this.highlightedPosition-1)},select:function(){var t=this.fOptions[this.highlightedPosition];this.keyword=t.Gene_Name,this.isOpen=!1,this.$emit("select",t)}},computed:{fOptions:function(){var t=new RegExp(this.keyword,"i");return i.a.chain(this.options).filter(function(e){return e.match(t)}).take(10).value()}}}},42:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(43),i=s.n(n),o=s(20),a=s.n(o);e.default={name:"pep-table",props:{data:{type:Array,required:!0},columns:{type:Array,required:!0},filterKey:String},data:function(){var t={};return this.columns.forEach(function(e){t[e]=1}),console.log("start",a()(t),t),{sortKey:"",sortOrders:t}},computed:{filteredData:function(){var t=this.sortKey,e=this.filterKey&&this.filterKey.toLowerCase(),s=this.sortOrders[t]||1,n=this.data;return e&&(n=n.filter(function(t){return i()(t).some(function(s){return String(t[s]).toLowerCase().indexOf(e)>-1})})),t&&(n=n.slice().sort(function(e,n){return e=e[t],n=n[t],(e===n?0:e>n?1:-1)*s})),n}},filters:{capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},methods:{sortBy:function(t){this.sortKey=t,this.sortOrders[t]=this.sortOrders[t]*-1}}}},75:function(t,e){},76:function(t,e){},77:function(t,e){},78:function(t,e){},97:function(t,e,s){s(76);var n=s(9)(s(40),s(101),"data-v-13df8e30",null);t.exports=n.exports},98:function(t,e,s){s(78);var n=s(9)(s(41),s(103),null,null);t.exports=n.exports},99:function(t,e,s){s(77);var n=s(9)(s(42),s(102),null,null);t.exports=n.exports}},[107]);
//# sourceMappingURL=app.8ef4ba2c298f01dd2aba.js.map